# 如何更好实现用户指令查询功能?

## 触发

- [ch1 任务难点「如何更好实现用户指令查询功能」的思考 · Issue #64 · AIHackers/Py101-004](https://github.com/AIHackers/Py101-004/issues/64#issuecomment-323522253)


## 目标

> 正确处理用户输入的指令
> 方便原有指令修改,不对其他部分代码造成影响
> 方便增加新的用户指令及对应功能

## 亮点

- 01 dict()实现函数分支
- 02 类封装用户信息

## 想法

- @thXiami 同学探究能力令人佩服
- 这里提一个小醒:应先从基本功能mvp出发一步一步做扩展



> 正确处理用户输入的指令
> 若新增指令及代码时，需要不断得增加elif才能实现需求，若指令增加则程序会很长

- 01 if...else
    - if...elif..else 还有优点的,个人很喜欢,可读性强,分支清晰明了.
    - 因此,就ch1 任务而言, if ...else 是个人认为最好选择



> 创建一个 User 类，用于存储本次用户输入，记录和输出查询历史

- 02 类
    - 存储本次用户输入，记录和输出查询历史用 list 就能实现
    - 就 ch1 任务而言,函数封装就足够了,不必用到 类
        - 为什么要用类?用它使得程序更清晰了?还是一定用到他的什么特性?
        - 好像并没有,反而类使得整个程序结构更复杂了



> \# 不是指令，user.key 中存放是判断过的合法输入，那用户输入就是中文

- 03 判断
    - 判断进过两层:?命令=>?中文
    - 那么假如城市不存在呢? 你的天气文件中不包含这个城市?
    - 个人觉得 else 用来判读异常情况比较合适 
    - 我的判断参考如下:
        - [程序说明](https://github.com/NBR-hugh/Py101-004/tree/master/Chap1/project#structure)
 
- 以上,遵循一个原则: **如无必要,勿增实体**.

>Explicit is better than implicit.
>Simple is better than complex.
>Complex is better than complicated.
>Flat is better than nested.
>Sparse is better than dense.
>Readability counts.

- 使用 **类**,考虑 **判断** 的不同形式也是极好的
- 但一切应该从功能出发,要使用它们应该提出新问题/新功能
- 在新功能/新问题的基础上考虑其的必须性/可行性
- 因此最好引入两个假设

## 假设

1. 假设要使用的命令繁多,暂定10个
2. 假设多用户,且离开程序后依然有机会再次使用历史信息.暂定2个

## 功能

- 根据假设推出功能
    - 1. 实现10个命令判断
        - 输入10个指令,调用10个函数
        - 这个时候字典的对应关系优势就体现出来
    - 2. 存储查询记录==>对应的用户信息
        - 在这个前提下,User class 才是有意义的

## 实现

- 具体实现我再想想

## Timelog

- 170820 阅读问题/代码 & 撰写提醒 `1h20m`



